postgresql-9.0 (9.0.1-1) unstable; urgency=low

  * New upstream security/bug fix release:
    - Use a separate interpreter for each calling SQL userid in PL/Perl
      and PL/Tcl.
      This change prevents security problems that can be caused by
      subverting Perl or Tcl code that will be executed later in the same
      session under another SQL user identity (for example, within a
      SECURITY DEFINER function). Most scripting languages offer numerous
      ways that that might be done, such as redefining standard functions
      or operators called by the target function. Without this change,
      any SQL user with Perl or Tcl language usage rights can do
      essentially anything with the SQL privileges of the target
      function's owner.
      The cost of this change is that intentional communication among
      Perl and Tcl functions becomes more difficult. To provide an escape
      hatch, PL/PerlU and PL/TclU functions continue to use only one
      interpreter per session. This is not considered a security issue
      since all such functions execute at the trust level of a database
      superuser already.
      It is likely that third-party procedural languages that claim to
      offer trusted execution have similar security issues. We advise
      contacting the authors of any PL you are depending on for
      security-critical purposes.
      Our thanks to Tim Bunce for pointing out this issue
      (CVE-2010-3433).
    - Improve pg_get_expr() security fix so that the function can still
      be used on the output of a sub-select.
    - Fix incorrect placement of placeholder evaluation.
      This bug could result in query outputs being non-null when they
      should be null, in cases where the inner side of an outer join is a
      sub-select with non-strict expressions in its output list.
    - Fix join removal's handling of placeholder expressions.
    - Fix possible duplicate scans of UNION ALL member relations.
    - Prevent infinite loop in ProcessIncomingNotify() after unlistening.
    - Prevent show_session_authorization() from crashing within
      autovacuum processes.
    - Re-allow input of Julian dates prior to 0001-01-01 AD.
      Input such as 'J100000'::date worked before 8.4, but was
      unintentionally broken by added error-checking.
    - Make psql recognize "DISCARD ALL" as a command that should not be
      encased in a transaction block in autocommit-off mode.
    - Update build infrastructure and documentation to reflect the source
      code repository's move from CVS to Git.

 -- Martin Pitt <mpitt@debian.org>  Tue, 05 Oct 2010 20:42:30 +0200

postgresql-9.0 (9.0.0-3) unstable; urgency=low

  * debian/postgresql-9.0.preinst: Add missing debhelper token.
  * debian/rules: debian/rules: Set DPKG_GENSYMBOLS_CHECK_LEVEL to 4 to point
    out outdated .symbols files more strongly.
  * Add symbols files for libecpg-compat3, libecpg6, and libpgtypes3.

 -- Martin Pitt <mpitt@debian.org>  Tue, 21 Sep 2010 01:23:54 +0200

postgresql-9.0 (9.0.0-2) unstable; urgency=low

  * debian/rules: Reenable building with -O1 on sparc and alpha, floating
    point with -O2 is still broken there.
  * Drop debian/libpq5.shlibs, replace it with a proper debian/libpq5.symbols.
    This keeps the reverse dependencies of libpq5 to >= 8.4, unless they use
    one of the four new functions.

 -- Martin Pitt <mpitt@debian.org>  Mon, 20 Sep 2010 19:46:33 +0200

postgresql-9.0 (9.0.0-1) unstable; urgency=low

  * Final 9.0 release, upload to unstable (will not go into Squeeze, though).
  * debian/postgresql-9.0.preinst: Add missing debhelper token.
  * debian/control: Bump Standards-Version to 3.9.1; no changes necessary.
  * debian/control: Build the versionless metapackages now and point them to
    9.0.
  * debian/control: Fix Vcs-* to point to 9.0 branch.
  * debian/rules: Drop special-case building with -O1 on sparc and alpha,
    let's see how the current compiler does.

 -- Martin Pitt <mpitt@debian.org>  Fri, 17 Sep 2010 11:41:29 +0200

postgresql-9.0 (9.0~rc1-1) experimental; urgency=low

  * First 9.0 release candidate.

 -- Martin Pitt <mpitt@debian.org>  Wed, 01 Sep 2010 11:50:54 +0200

postgresql-9.0 (9.0~beta4-1) experimental; urgency=low

  * New upstream beta release.

 -- Martin Pitt <mpitt@debian.org>  Sun, 01 Aug 2010 21:19:01 +0200

postgresql-9.0 (9.0~beta3-2) experimental; urgency=low

  * Migrate to a common init script for all server versions, to avoid
    providing the "postgresql" service in multiple packages (which causes
    insserv to complain bitterly):
    - Drop debian/postgresql-9.0.init.
    - debian/control: Bump dependency to postgresql-common to ensure we have a
      common /etc/init.d/postgresql init script.
    - debian/postgresql-9.0.preinst: Remove/rename our init script on upgrade.	
    - debian/postgresql-9.0.prerm: Call stop_version on upgrade/removal.
    - debian/rules: Drop dh_installinit arguments.
    - (Closes: #589523)

 -- Martin Pitt <mpitt@debian.org>  Mon, 19 Jul 2010 23:34:13 +0200

postgresql-9.0 (9.0~beta3-1) experimental; urgency=low

  * New upstream beta release.
  * debian/postgresql-contrib-9.0.install: Add the new pg_archivecleanup.

 -- Martin Pitt <mpitt@debian.org>  Tue, 13 Jul 2010 10:09:02 +0200

postgresql-9.0 (9.0~beta2-1) experimental; urgency=low

  * New upstream beta release.
  * debian/postgresql-9.0.install: Install pg_upgrade.
  * debian/control: Set back maintainer to me, but keep Peter Eisentraut as
    Uploader.

 -- Martin Pitt <mpitt@debian.org>  Sun, 06 Jun 2010 19:18:03 +0200

postgresql-9.0 (9.0~beta1-1) experimental; urgency=low

  [ Peter Eisentraut ]
  * Create 9.0 package based on 8.4 packaging trunk. Don't build versionless
    metapackages for 9.0 yet.
    - Adjusted 11-pg_regress-socketpath.patch
    - Obsoletes 03-sh-architecture.patch
  * Dropped obsolete documentation build.
  * debian/rules: Use make world/install-world targets, obsoletes
    01-build-contrib.patch.
  * debian/watch: Adjusted for alpha releases.

  [ Martin Pitt ]
  * Update to upstream beta 1 release.
  * 07-relax-sslkey-permscheck.patch: Add parentheses around || .. &&
    construct to avoid a compiler warning (which turns into an error when
    building with -Werror). Also add a DEP3 compatible header.
  * 14-pg_config-paths.patch: Drop now unused "ret" variable (fix FTBFS with
    -Werror). Add a DEP3 compatible header.
  * debian/control: Bump p-common dependency to >= 107~ to ensure support for
    9.0.
  * debian/disable-root-check.patch: Refresh to apply cleanly.
  * Convert source package to "3.0 (quilt)" format.
  * Refresh patches to apply without fuzz.
  * debian/control: Bump Standards-Version to 3.8.4 (no changes necessary).
  * debian/patches/: Add DEP-3 compatible patch descriptions.
  * Merge 08-pkglibdir.patch, 09-server-includedir.patch, and
    14-pg_config-paths.patch into 50-per-version-dirs.patch, since they really
    belong together.
  * Merge 06-libpq-defaultsocketdir.patch and 11-pg_regress-socketpath.patch
    into 51-default-sockets-in-var.patch, they really belong together.
  * Re-enumerate 10-tutorial-README.patch and
    13-pg_service.conf_directory_doc.patch to 5x-*, since they are Debian
    specific.
  * Merge 02-pager.patch and 12-psql-sensible-editor.patch into
    54-debian-alternatives-for-external-tools.patch.
  * Re-enumerate remaining patches.

 -- Martin Pitt <mpitt@debian.org>  Mon, 03 May 2010 07:45:23 +0200
