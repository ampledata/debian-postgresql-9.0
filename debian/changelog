postgresql-9.0 (9.0~alpha4-0.1) UNRELEASED; urgency=low

  * New upstream alpha release.
    - Adjusted 11-pg_regress-socketpath.patch
  * debian/rules: Use make world/install-world targets, obsoletes
    01-build-contrib.patch.

 -- Peter Eisentraut <petere@debian.org>  Sat, 27 Mar 2010 22:27:29 +0200

postgresql-8.5 (8.5~alpha2-0.1) UNRELEASED; urgency=low

  * New upstream alpha release.
    - Adjusted 11-pg_regress-socketpath.patch
    - Obsoletes: 03-sh-architecture.patch

 -- Peter Eisentraut <petere@debian.org>  Thu, 05 Nov 2009 22:58:19 +0200

postgresql-8.5 (8.5~alpha1-0.1) UNRELEASED; urgency=low

  * New upstream alpha release. Packaging branched from 8.4 packaging trunk, 
    but don't build default packages from this one.
  * Temporarily different maintainer.
  * Dropped obsolete documentation build.

 -- Peter Eisentraut <petere@debian.org>  Thu, 03 Sep 2009 22:46:16 +0300

postgresql-8.4 (8.4.1-2.1) UNRELEASED; urgency=low

  * debian/control: Added Homepage
  * debian/control: Added ${misc:Depends} on all packages, per lintian
  * debian/control: Added versioned dependencies on the shared libraries used 
    by the libecpg-dev package
  * debian/control: Removed obsolete build dependency bzip2

 -- Peter Eisentraut <petere@debian.org>  Thu, 05 Nov 2009 19:27:40 +0200

postgresql-8.4 (8.4.1-2) UNRELEASED; urgency=low

  * debian/control: libreadline5-dev â†’ libreadline-dev. (Closes: #553831)
  * Add 03-sh-architecture.patch: Support Renesas' SuperH architecture, thanks
    Nobuhiro Iwamatsu! (Closes: #548847)

 -- Martin Pitt <mpitt@debian.org>  Mon, 14 Sep 2009 09:17:05 +0200

postgresql-8.4 (8.4.1-1) unstable; urgency=medium

  * Urgency medium due to security fix.
  * New upstream security/bug fix release:
    - Disallow "RESET ROLE" and "RESET SESSION AUTHORIZATION" inside
      security-definer functions. This covers a case that was missed in the
      previous patch that disallowed "SET ROLE" and "SET SESSION
      AUTHORIZATION" inside security-definer functions. [CVE-2007-6600]
    - Fix WAL page header initialization at the end of archive recovery.
      This could lead to failure to process the WAL in a subsequent archive
      recovery.
    - Fix "cannot make new WAL entries during recovery" error.
    - Fix problem that could make expired rows visible after a crash.
      This bug involved a page status bit potentially not being set
      correctly after a server crash.
    - Make "LOAD" of an already-loaded loadable module into a no-op.
      Formerly, "LOAD" would attempt to unload and re-load the module,
      but this is unsafe and not all that useful.
    - Make window function PARTITION BY and ORDER BY items always be
      interpreted as simple expressions.
      In 8.4.0 these lists were parsed following the rules used for
      top-level GROUP BY and ORDER BY lists. But this was not correct per
      the SQL standard, and it led to possible circularity.
    - Fix several errors in planning of semi-joins. These led to wrong query
      results in some cases where IN or EXISTS was used together with another
      join.
    - Fix handling of whole-row references to subqueries that are within
      an outer join. An example is SELECT COUNT(ss.-) FROM ... LEFT JOIN
      (SELECT ...) ss ON .... Here, ss.- would be treated as
      ROW(NULL,NULL,...) for null-extended join rows, which is not the same as
      a simple NULL.  Now it is treated as a simple NULL.
    - Fix locale handling with plperl. This bug could cause the server's
      locale setting to change when a plperl function is called, leading to
      data corruption.
    - Fix handling of reloptions to ensure setting one option doesn't
      force default values for others.
    - Ensure that a "fast shutdown" request will forcibly terminate open
      sessions, even if a "smart shutdown" was already in progress.
    - Avoid memory leak for array_agg() in GROUP BY queries.
    - Treat to_char(..., 'TH') as an uppercase ordinal suffix with
      'HH'/'HH12'.  It was previously handled as 'th'.
    - Include the fractional part in the result of EXTRACT(second) and
      EXTRACT(milliseconds) for time and time with time zone inputs.
      This has always worked for floating-point datetime configurations,
      but was broken in the integer datetime code.
    - Fix overflow for INTERVAL 'x ms' when "x" is more than 2 million
      and integer datetimes are in use.
    - Improve performance when processing toasted values in index scans.
      This is particularly useful for PostGIS.
    - Fix a typo that disabled commit_delay.
    - Output early-startup messages to "postmaster.log" if the server is
      started in silent mode. Previously such error messages were discarded,
      leading to difficulty in debugging.
    - Remove translated FAQs. They are now on the wiki. The main FAQ was moved
      to the wiki some time ago.
    - Fix pg_ctl to not go into an infinite loop if "postgresql.conf" is
      empty.
    - Fix several errors in pg_dump's --binary-upgrade mode. pg_dump
      --binary-upgrade is used by pg_migrator.
    - Fix "contrib/xml2"'s xslt_process() to properly handle the maximum
      number of parameters (twenty).
    - Improve robustness of libpq's code to recover from errors during
      "COPY FROM STDIN".
    - Avoid including conflicting readline and editline header files when
      both libraries are installed.
    - Work around gcc bug that causes "floating-point exception" instead
      of "division by zero" on some platforms.
  * debian/control: Bump Standards-Version to 3.8.3 (no changes necessary).

 -- Martin Pitt <mpitt@debian.org>  Sun, 06 Sep 2009 14:11:13 +0200

postgresql-8.4 (8.4.0-2) unstable; urgency=low

  * debian/libpq-dev.install: Ship catalog/genbki.h. (Closes: #536139)
  * debian/rules: Drop --enable-cassert for final release.

 -- Martin Pitt <mpitt@debian.org>  Sat, 11 Jul 2009 16:59:35 +0200

postgresql-8.4 (8.4.0-1) unstable; urgency=low

  * Final 8.4.0 release. Major enhancements:
    - Windowing Functions
    - Common Table Expressions and Recursive Queries
    - Default and variadic parameters for functions
    - Parallel Restore
    - Column Permissions
    - Per-database locale settings
    - Improved hash indexes
    - Improved join performance for EXISTS and NOT EXISTS queries
    - Easier-to-use Warm Standby
    - Automatic sizing of the Free Space Map
    - Visibility Map (greatly reduces vacuum overhead for slowly-changing
      tables)
    - Version-aware psql (backslash commands work against older servers)
    - Support SSL certificates for user authentication
    - Per-function runtime statistics
    - Easy editing of functions in psql
    - New contrib modules: pg_stat_statements, auto_explain, citext,
      btree_gin 
    Upload to unstable, 8.4 is the new default. 
  * debian/control: Build the versionless metapackages and have them point to
    8.4.

 -- Martin Pitt <mpitt@debian.org>  Wed, 01 Jul 2009 17:41:41 +0200

postgresql-8.4 (8.4~rc1-1) experimental; urgency=low

  * First release candidate of 8.4.

 -- Martin Pitt <mpitt@debian.org>  Mon, 22 Jun 2009 09:17:52 +0200

postgresql-8.4 (8.4~beta2-2) experimental; urgency=low

  * Second public beta of 8.4.
  * debian/control: Slightly lower the dependencies for postgresql-common to
    >= 98~, so that backports also match.

 -- Martin Pitt <mpitt@debian.org>  Tue, 19 May 2009 14:03:37 +0200

postgresql-8.4 (8.4~beta1+cvs20090503-1) experimental; urgency=low

  * New upstream snapshot.

 -- Martin Pitt <mpitt@debian.org>  Tue, 05 May 2009 00:58:06 +0200

postgresql-8.4 (8.4~beta1-1) experimental; urgency=low

  * First public beta of 8.4.
  * debian/*.install: Add new gettext translations.
  * debian/control: Bump p-common dependency to >= 98 to ensure support for
    8.4.
  * debian/rules: Build with --enable-cassert while in beta.

 -- Martin Pitt <mpitt@debian.org>  Mon, 27 Apr 2009 08:35:30 +0200

postgresql-8.4 (8.4~0cvs20090328-1) experimental; urgency=low

  * Package current trunk, which will become 8.4 in time. Packaging branched
    from 8.3 packaging trunk. Move from cdbs' tarball.mk to bzr-builddeb.
  * Drop obsolete patches:
    - 03-gettext-domains.patch: Adopted upstream.
    - 04-psql-passwordprompt.patch: Obsoleted by new psql -w option.
    - 05-check-rlimits-nofile.patch: Adopted upstream.
  * Update remaining patches for new upstream version.
  * Add debian/docbook2man-sgmlspl/docbook2man-spec{.pl,_makelinks}: Current
    Debian version in docbook-utils is way too old and broken (see #275715,
    #271611), locally ship the current ones from upstream, in order to build
    manpages.
  * debian/rules: Build documentation and manpage tarballs if not present (as
    with building from CVS). Add necessary build dependencies docbook-utils,
    openjade, and docbook.

 -- Martin Pitt <mpitt@debian.org>  Fri, 20 Mar 2009 12:00:13 +0100
